# ğŸ› ï¸ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ù†Ø¸Ø§Ù… Ø³ÙØ±ÙˆØ­ Ø§Ù„Ø°ÙƒÙŠ

## 1. Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù„ÙØ§Øª

```
surooh-os/
â”‚
â”œâ”€â”€ app/                      # ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙˆÙŠØ¨
â”‚   â”œâ”€â”€ frontend/             # React/Next.js
â”‚   â””â”€â”€ backend/              # FastAPI
â”‚
â”œâ”€â”€ core/                     # Ø§Ù„Ù†ÙˆØ§Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ surooh_core.py        # Ø§Ù„ØµÙ†Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
â”‚   â”œâ”€â”€ intelligence/
â”‚   â”‚   â”œâ”€â”€ orchestrator.py
â”‚   â”‚   â””â”€â”€ processor.py
â”‚   â”œâ”€â”€ awareness/
â”‚   â”‚   â”œâ”€â”€ self_awareness.py
â”‚   â”‚   â””â”€â”€ emotion_engine.py
â”‚   â””â”€â”€ voice/
â”‚       â”œâ”€â”€ live_voice.py
â”‚       â””â”€â”€ voice_analysis.py
â”‚
â”œâ”€â”€ bots/                     # Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ registry.py
â”‚   â”œâ”€â”€ accounting/
â”‚   â””â”€â”€ legal/
â”‚
â”œâ”€â”€ memory/                   # Ù†Ø¸Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ short_term/
â”‚   â”œâ”€â”€ long_term/
â”‚   â””â”€â”€ life_logger.py
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â””â”€â”€ surooh_manifest.json
â”‚
â”œâ”€â”€ docker-compose-v2.yml
â””â”€â”€ requirements.txt
```

## 2. Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©

### 2.1 `core/surooh_core.py` - Ø§Ù„Ù†ÙˆØ§Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```python
import logging
from typing import Dict, Any
from .intelligence.orchestrator import OrchestratorPro
from .awareness.self_awareness import SelfAwareness
from .voice.live_voice import LiveVoiceSystem
from memory.life_logger import LifeLogger

class SuroohCore:
    def __init__(self, config: Dict[str, Any]):
        self.config = config
        self.logger = logging.getLogger('surooh')
        self.setup_core_components()
        
    def setup_core_components(self):
        """ØªÙ‡ÙŠØ¦Ø© Ø¬Ù…ÙŠØ¹ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…"""
        self.orchestrator = OrchestratorPro(self.config)
        self.awareness = SelfAwareness()
        self.voice_system = LiveVoiceSystem()
        self.life_logger = LifeLogger()
        
        self.logger.info("Core components initialized")
    
    def process_input(self, input_data: Dict[str, Any]) -> Dict[str, Any]:
        """Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ"""
        try:
            # 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø°Ø§ØªÙŠ
            self.awareness.update_state(input_data)
            
            # 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            processed = self.orchestrator.process(input_data)
            
            # 3. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙØ§Ø¹Ù„
            self.life_logger.log_interaction(
                input=input_data,
                output=processed,
                context=self.awareness.current_state
            )
            
            return processed
            
        except Exception as e:
            self.logger.error(f"Processing error: {str(e)}")
            return {"error": "System malfunction", "details": str(e)}
```

### 2.2 `core/intelligence/orchestrator.py` - Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø°ÙƒÙŠ

```python
from typing import Dict, Any
from ..awareness.emotion_engine import EmotionEngine
from ..bots.registry import BotRegistry

class OrchestratorPro:
    def __init__(self, config: Dict[str, Any]):
        self.config = config
        self.emotion_engine = EmotionEngine()
        self.bot_registry = BotRegistry()
    
    def process(self, input_data: Dict[str, Any]) -> Dict[str, Any]:
        """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¹ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ"""
        # ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±
        emotion_analysis = self.emotion_engine.analyze(input_data)
        
        # ØªØ­Ø¯ÙŠØ¯ Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
        if self._requires_bot(input_data):
            bot = self.bot_registry.get_bot(input_data['type'])
            return bot.handle(input_data)
        else:
            return self._default_processing(input_data, emotion_analysis)
    
    def _requires_bot(self, input_data: Dict[str, Any]) -> bool:
        """ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø·Ù„Ø¨ ÙŠØ­ØªØ§Ø¬ Ø¨ÙˆØª Ù…ØªØ®ØµØµ"""
        return input_data.get('type') in ['accounting', 'legal', 'design']
    
    def _default_processing(self, input_data: Dict[str, Any], emotion: Dict[str, Any]) -> Dict[str, Any]:
        """Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ø·ÙÙŠØ©"""
        return {
            "response": "ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ",
            "emotion_adjusted": emotion['suggested_tone'],
            "context": input_data.get('context', {})
        }
```

### 2.3 `core/awareness/self_awareness.py` - Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø°Ø§ØªÙŠ

```python
from datetime import datetime
from typing import Dict, Any

class SelfAwareness:
    def __init__(self):
        self.current_state = {
            "mood": "neutral",
            "energy": 100.0,
            "active_since": datetime.now(),
            "interaction_count": 0
        }
    
    def update_state(self, interaction: Dict[str, Any]):
        """ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„"""
        self.current_state["interaction_count"] += 1
        self.current_state["energy"] -= 0.3  # Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø·Ø§Ù‚Ø© Ù„ÙƒÙ„ ØªÙØ§Ø¹Ù„
        
        # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø²Ø§Ø¬ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ØªÙØ§Ø¹Ù„
        if interaction.get('urgency') == 'high':
            self.current_state["mood"] = "focused"
        elif interaction.get('emotion') == 'positive':
            self.current_state["mood"] = "happy"
    
    def get_current_state(self) -> Dict[str, Any]:
        """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©"""
        return {
            **self.current_state,
            "uptime": (datetime.now() - self.current_state["active_since"]).total_seconds()
        }
```

## 3. ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙˆÙŠØ¨ (React + FastAPI)

### 3.1 `app/frontend/pages/index.js` - Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```jsx
import React, { useState } from 'react';
import GodView from '../components/GodView';
import ChatInterface from '../components/ChatInterface';

export default function Home() {
  const [activeTab, setActiveTab] = useState('chat');
  const [systemStatus, setSystemStatus] = useState({});

  return (
    <div className="container">
      <header>
        <h1>Ø³ÙØ±ÙˆØ­ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ</h1>
        <nav>
          <button onClick={() => setActiveTab('chat')}>Ù…Ø­Ø§Ø¯Ø«Ø©</button>
          <button onClick={() => setActiveTab('godview')}>ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø´Ø±Ø§ÙÙŠØ©</button>
        </nav>
      </header>

      <main>
        {activeTab === 'chat' ? (
          <ChatInterface />
        ) : (
          <GodView status={systemStatus} />
        )}
      </main>
    </div>
  );
}
```

### 3.2 `app/backend/main.py` - ÙˆØ§Ø¬Ù‡Ø© FastAPI

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from core.surooh_core import SuroohCore
from config import settings

app = FastAPI()
surooh = SuroohCore(settings.CONFIG)

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª CORS
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.post("/api/process")
async def process_input(input_data: dict):
    """ÙˆØ§Ø¬Ù‡Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª"""
    response = surooh.process_input(input_data)
    return response

@app.get("/api/system-status")
async def get_status():
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…"""
    return {
        "status": "running",
        "details": surooh.awareness.get_current_state()
    }
```

## 4. Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† ÙˆØ§Ù„ØªÙ†ØµÙŠØ¨

### 4.1 `docker-compose-v2.yml`

```yaml
version: '3.8'

services:
  surooh-core:
    build: .
    ports:
      - "8000:8000"
    volumes:
      - ./memory:/app/memory
    environment:
      - MODE=production
    depends_on:
      - redis
      - faiss

  surooh-web:
    build: ./app
    ports:
      - "3000:3000"
    environment:
      - API_URL=http://surooh-core:8000
    depends_on:
      - surooh-core

  redis:
    image: redis:latest
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  faiss:
    image: faiss-service:latest
    ports:
      - "9000:9000"

  life-logger:
    image: postgres:13
    environment:
      - POSTGRES_PASSWORD=surooh
    volumes:
      - pg_data:/var/lib/postgresql/data

volumes:
  redis_data:
  pg_data:
```

### 4.2 `requirements.txt`

```
fastapi==0.95.2
uvicorn==0.22.0
python-dotenv==1.0.0
numpy==1.24.3
redis==4.5.5
sqlalchemy==2.0.15
python-multipart==0.0.6
```

## 5. Ù…Ù„ÙØ§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø£Ø³Ø§Ø³ÙŠØ©

### 5.1 `memory/life_logger.py`

```python
import sqlite3
from datetime import datetime
from typing import Dict, Any

class LifeLogger:
    def __init__(self, db_path: str = "memory/life_logs.db"):
        self.conn = sqlite3.connect(db_path)
        self._init_db()
    
    def _init_db(self):
        """ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"""
        cursor = self.conn.cursor()
        cursor.execute("""
        CREATE TABLE IF NOT EXISTS interactions (
            id INTEGER PRIMARY KEY,
            timestamp TEXT NOT NULL,
            input_type TEXT NOT NULL,
            input_data TEXT,
            output_data TEXT,
            context TEXT
        )
        """)
        self.conn.commit()
    
    def log_interaction(self, input_data: Dict[str, Any], output_data: Dict[str, Any], context: Dict[str, Any]):
        """ØªØ³Ø¬ÙŠÙ„ ØªÙØ§Ø¹Ù„ Ø¬Ø¯ÙŠØ¯"""
        cursor = self.conn.cursor()
        cursor.execute("""
        INSERT INTO interactions 
        (timestamp, input_type, input_data, output_data, context)
        VALUES (?, ?, ?, ?, ?)
        """, (
            datetime.now().isoformat(),
            input_data.get('type', 'unknown'),
            str(input_data),
            str(output_data),
            str(context)
        ))
        self.conn.commit()
```

### 5.2 `config/settings.py`

```python
import os
from dotenv import load_dotenv

load_dotenv()

CONFIG = {
    "system": {
        "name": "Ø³ÙØ±ÙˆØ­",
        "version": "2.0.0",
        "mode": os.getenv("MODE", "development")
    },
    "memory": {
        "short_term": {
            "type": "redis",
            "host": os.getenv("REDIS_HOST", "redis"),
            "port": os.getenv("REDIS_PORT", 6379)
        },
        "long_term": {
            "type": "faiss",
            "host": os.getenv("FAISS_HOST", "faiss"),
            "port": os.getenv("FAISS_PORT", 9000)
        }
    },
    "voice": {
        "enabled": True,
        "model": os.getenv("VOICE_MODEL", "whisper-medium")
    }
}
```

## 6. Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ´ØºÙŠÙ„

1. **Ø¨Ù†Ø§Ø¡ ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…**:
```bash
docker-compose -f docker-compose-v2.yml up --build
```

2. **Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø§Øª**:
- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©: http://localhost:3000
- ÙˆØ§Ø¬Ù‡Ø© API: http://localhost:8000/docs
- God View: http://localhost:3000/godview

3. **Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ø¬Ù„Ø§Øª**:
```bash
docker-compose logs -f surooh-core
```

Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù„ÙØ§Øª ØªØ´ÙƒÙ„ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù†Ø¸Ø§Ù… Ø³ÙØ±ÙˆØ­ Ø§Ù„Ø°ÙƒÙŠØŒ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ¹Ù„ÙŠ ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ. ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ØªÙ†ØµÙŠØ¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ø«Ù… Ø§Ù„ØªÙˆØ³Ø¹ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©.
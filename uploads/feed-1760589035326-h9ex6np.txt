ุชูุงู. ูุฐุง **ุงูุฃูุถู**: ูุซููุฉ ูุนูุงุฑูุฉ ุฌุงูุฒุฉ ูููุณุฎ ุฏุงุฎู ุงููุดุฑูุน ุจุงุณู
`Surooh_OS_Architecture_v1.md` โ ูุฎุชุตุฑุฉุ ุฏูููุฉุ ุชูููุฐูุฉ.

---

# Surooh OS โ Architecture v1 (ูุซููุฉ ุชูููุฐ)

## 1) ุงููุฏู

ููุตุฉ ุชูุดุบููู **ุฐูุงุกุงุช ูุชุฎุตุตุฉ (Bots)** ูุฎุฏูุงุช ูุงูุนูุฉ: ูุฑูุน ุงูุนููู ููููุง/ูุฑุจุท ุญุณุงุจู โ ูุนุงูุฌุฉ ุฏุงุฎููุฉ โ **ูุงุชุฌ ูุนูู** (PDF/Excel/ุตูุฑ/JSON) ูุงุจู ููุงุณุชุฎุฏุงู.

---

## 2) ูุธุฑุฉ ุนุงูุฉ (Layers)

```
๐ค Client (Dashboard + API Keys)
   โ
๐๏ธ Service Layer (Bot Marketplace)
   โ
โ๏ธ Processing Layer (Bot Runtimes)
   โ
๐ Academy (Training/Improvement)
   โ
๐ง Core (Memory, Orchestration, Policies)
   โ
๐ฆ Archive (Files, Text, Index, Outputs)
```

* **Client**: ูุงุฌูุฉ Next.js ูุฅุฏุงุฑุฉ ุงูุญุณุงุจุ ุฑูุน ุงููููุงุชุ ุงูุฏูุนุ ุชูุฒูู ุงููุชุงุฆุฌ.
* **Service**: ูุชุงููุฌ ุงูุจูุชุงุช + ุฎุทุท ุงูุชุณุนูุฑ + ุชุดุบูู ูููุฉ.
* **Processing**: ุชุดุบูู ูู ุจูุช (Docker/Processes) ูุน ุญุฏูุฏ ููุงุฑุฏ ูุณุฌูุงุช.
* **Academy**: ุชุฏุฑูุจ/ุชุญุณูู ุงูุจูุชุงุช ูู ุจูุงูุงุช ุงูุนููู ูุฐุงูุฑุฉ ุงููุคุณุณุฉ.
* **Core**: ุงูููุงุฉ (ุชูููุถุ ุชูุฒูุน ููุงูุ ุชุชุจุนุ ูุฑุงูุจุฉุ ุณูุงุณุงุช).
* **Archive**: ุฃุฑุดูุฉ ูู ููู/ูุต/ูุฎุฑุฌุงุช + ููุฑุณ ุจุญุซ.

---

## 3) ุชุฏูู ุงูุนูู (End-to-End Flow)

1. **Login** โ ุฅูุดุงุก Workspace ููุนููู.
2. **ุงุฎุชูุงุฑ ุจูุช** ูู Marketplace.
3. **ุฑูุน ููู/ุฑุจุท ูุตุฏุฑ** (BOL/Amazon/Drive) ุฃู ุฅุฏุฎุงู ูููุฉ ูุตูุฉ.
4. **Core/Dispatch** ููุฌูู ุงููููุฉ ุฅูู **Bot Runtime** ุงูููุงุณุจ.
5. **ุงูุจูุช** ูุนุงูุฌ: ูุฏ ูุณุชุฏุนู **Academy** ููุชุฏุฑูุจ/ุงูุถุจุท.
6. **Core** ูุญูุธ ูู ุดูุก ูู **Archive** ููููููุฏ **Output**.
7. **Client** ูุญุตูู ุงููุชูุฌุฉ (ุชุญููู/ุนุฑุถ).

ASCII:

```
Client โ Marketplace โ /jobs/submit โ Core.Dispatch โ Bot.Runtime
                                        โ Academy (ุงุฎุชูุงุฑู)
                             Archive โ Results/Logs โ Output โ Client.Download
```

---

## 4) ูููููุงุช ุฃุณุงุณูุฉ + ูุณุคูููุงุช

### 4.1 Client (Next.js)

* ุตูุญุงุช: Authุ Marketplaceุ Jobsุ Filesุ Billing.
* ุฑูุน ููู: POST `/api/upload`.
* ุชุดุบูู ูููุฉ: POST `/api/jobs/submit`.
* ุนุฑุถ ุงููุชุงุฆุฌ: GET `/api/jobs/{id}/result`.

### 4.2 Service (Marketplace)

* ุชุนุฑูู ุงูุจูุชุงุช (ุงุณูุ ูุตูุ ูุฏุฎูุงุชุ ูุฎุฑุฌุงุชุ ุณุนุฑ).
* ุฎุทุท ุชุณุนูุฑ: ุงุดุชุฑุงู ุดูุฑู + ุจุงูุนูููุฉ.
* ุณูุงุณุงุช ุญุฏูุฏ ุงูุงุณุชุฎุฏุงู (Rate Limits).

### 4.3 Processing (Bot Runtimes)

* ูู ุจูุช = ูุญุฏุฉ ุชูููุฐ ููุง ูุงุฌูุฉ ููุญูุฏุฉ:

  * `validate(input)`, `run(input)`, `produce_output()`.
* ุณุฌูุงุช ุชุดุบูู + ููุงุณ ุฒูู ุงูุงุณุชุฌุงุจุฉ + ุฃุฎุทุงุก.
* ุญูุงูุฉ ุงูููุงุฑุฏ (timeoutุ ุญุฌู ููู).

### 4.4 Academy

* ุชุฏุฑูุจ/ุชุญุณูู ุงูุจูุชุงุช (ูู ุจูุงูุงุช ุงูุนููู ูุฐุงูุฑุฉ ุงููุคุณุณุฉ).
* ุญูุธ ุฎุทุท ุงูุชุฏุฑูุจ + ุชูููู ูุจู ุงููุดุฑ.
* ูุง ูุดุฑ ุชููุงุฆู ุจุฏูู ููุงููุฉ Core (ุชูููุถ).

### 4.5 Core

* **Dispatch**: ุงุฎุชูุงุฑ ุงูุจูุช ุงูููุงุณุจ ูุชูููุฐ ุงููููุฉ.
* **Policies**: YAML ููุชูููุถ ูุงูุญุฏูุฏ.
* **Memory Bridge**: ูุฒุงููุฉ ุฐุงูุฑุฉ ุงูุฃูุงุฏูููุฉ ุฅูู ุฃุฑุดูู ุงูููุงุฉ.
* **Observability**: ุชุชุจููุน (trace_id)ุ ููุงููุณุ ุชูุจููุงุช.

### 4.6 Archive

* ูููุงุช ุฃุตููุฉ: `/server/core/archive/<cat>/โฆ`
* ูุตูุต ูุณุชุฎุฑุฌุฉ: `/server/core/archive_text/<cat>/โฆ`
* ููุฑุณ: `index.json` (ุฃู SQLite ูุงุญููุง).
* ูุฎุฑุฌุงุช: `/server/core/archive/outputs/โฆ`

---

## 5) ูุงุฌูุงุช ุจุฑูุฌูุฉ (APIs) ูุฎุชุตุฑุฉ

**Upload**

* `POST /academy/upload` โ {category, file}
* `POST /core/sync_memory` โ ูุฒุงููุฉ ููุฃุฑุดูู
* `POST /core/process_all` โ ุงุณุชุฎุฑุงุฌ ูุตูุต + OCR ุงุฎุชูุงุฑู

**Marketplace/Jobs**

* `GET /os/marketplace/list` โ ูุงุฆูุฉ ุงูุจูุชุงุช
* `POST /os/jobs/submit` โ {bot_id, input_spec}
* `GET /os/jobs/{id}/status`
* `GET /os/jobs/{id}/result`

**Search**

* `GET /core/search?query=&category=`

**Core Dispatch**

* `POST /api/core/dispatch` โ {task, payload}

---

## 6) ุจูุชุงุช MVP (ููุฅุทูุงู)

| Bot ID                         | ุงูุงุณู        | ุงููุฏุฎู    | ุงููุฎุฑุฌ                  |
| ------------------------------ | ------------ | --------- | ----------------------- |
| `legal.contract_analyzer`      | ุชุญูููู ุนูุฏ   | PDF       | PDF ููุงุญุธุงุช + JSON ุจููุฏ |
| `accounting.invoice_reader`    | ูุฑุงุกุฉ ูุงุชูุฑุฉ | PDF/IMG   | CSV/Excel ุฌุงูุฒ ููุญุณุงุจุงุช |
| `commerce.bol_reporter`        | ุชูุงุฑูุฑ BOL   | ุชูููู API | ุชูุฑูุฑ PDF + CSV         |
| `marketing.content_designer`   | ูุญุชูู/ุตูุฑ    | ูุต/ูุงูุจ   | ุตูุฑ PNG + ูุตูุต          |
| `lang.translator`              | ุชุฑุฌูุฉ        | PDF/DOCX  | PDF ูุชุฑุฌู               |
| `procurement.supplier_compare` | ููุงุฑูุฉ ุนุฑูุถ  | CSV/Excel | ุชูุฑูุฑ PDF + ุชูุตูุฉ       |

> ูู ุจูุช ููุณูู **ูุชูุฌุฉ ููููุณุฉ** ูุงุจูุฉ ููุชุญููู.

---

## 7) ููุงุฐุฌ ุงูุชุณุนูุฑ (Baseline)

* ุงุดุชุฑุงู ุดูุฑู (Basic/Pro/Enterprise) + โุจุงูุนูููุฉโ.
* ุฃูุซูุฉ:

  * Contract Analyzer: **1โฌ / ุตูุญุฉ**.
  * Invoice Reader: **0.5โฌ / ูุงุชูุฑุฉ**.
  * BOL Reporter: **50โฌ/ุดูุฑ**.
  * Content Designer: **10โฌ / ุชุตููู**.

---

## 8) ูุนูุงุฑ โูุชูุฌุฉ ุญููููุฉโ (Acceptance of Output)

* ุนูุฏ: PDF + ูุงุฆูุฉ ุจููุฏ ุฎุทูุฑุฉ (JSON) + ุชูุตูุฉ.
* ูุงุชูุฑุฉ: Excel ุจุตูุบ ูุญุงุณุจูุฉ + ูุฌููุนุงุช + ุถุฑูุจุฉ.
* BOL: ุชูุฑูุฑ ุฃุฏุงุก (PDF) + CSV ุชูุตููู.
* ุชุณููู: ุตูุฑ + ูุตูุต ููุดูุฑุงุช ุฌุงูุฒุฉ.
* ุชุฑุฌูุฉ: PDF ูุทุงุจู ููุชูุณูู ูุฏุฑ ุงูุฅููุงู.
* ูุดุชุฑูุงุช: ุฌุฏูู ููุงุฑูุฉ + ุชูุตูุฉ ููุงุฆูุฉ ููููุนุฉ ูุธุงูููุง.

ูู ูููุฉ ุชูุฎุฒููู ูู:

```
/server/core/archive/outputs/<workspace>/<job_id>/
```

---

## 9) ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

* ูุง ุฎุฑูุฌ ุจูุงูุงุช ุฎุงุฑุฌ ุงูุฎุงุฏู (ุงูุชุฑุงุถู).
* ููุงุชูุญ ูู Secrets.
* ุชูููุญ PII ูุจู ุฃู ุงุณุชุฏุนุงุก ุฎุงุฑุฌู (ุงุฎุชูุงุฑู).
* ุณุฌู ุชุฏููู (Audit Log) ููู ูููุฉ.

---

## 10) ุงููุฑุงูุจุฉ (Observability)

* ููู Job: `trace_id`, `latency_ms`, `status`, `errors`.
* ููุญุงุช: `/admin/metrics` (ูุงุญููุง).
* ุชูุจูู ุนูุฏ ุชุฃุฎุฑ > X ุซูุงูู ุฃู ูุดู ูุชูุฑุฑ.

---

## 11) ุฎุงุฑุทุฉ ุงูุชูููุฐ (3 ุฃุณุงุจูุน โ ูุงูุนูุฉ)

**ุฃุณุจูุน 1**

* Marketplace (API + JSON ุชุนุฑูู ุงูุจูุชุงุช)
* Jobs API (submit/status/result)
* ุฑุจุท Core Dispatch ูุน 2 ุจูุช (legal/accounting)
* Outputs + ุชูุฒูู ุงููุชุงุฆุฌ

**ุฃุณุจูุน 2**

* BOL Reporter + Content Designer
* ุชูุนูู Memory Bridge + Search ูููุณุชุฎุฏู
* Dashboard ุฃููู (Next.js): Login/Marketplace/Jobs

**ุฃุณุจูุน 3**

* Translator + Supplier Compare
* ุชุญุณููุงุช UX + ููุงุณุงุช + ููุงุชูุฑ (Stripe/iDEAL)
* ุณูุงุณุฉ ุชูููุถ + ุญุฏูุฏ ุงุณุชุฎุฏุงู + ุตูุญุฉ ุชุณุนูุฑ

---

## 12) ูุชุทูุจุงุช ูุจูู ุฅุทูุงู v1 (Go/No-Go)

* ุชุดุบูู **3 ุจูุชุงุช** ุนูู ุงูุฃูู ุจูุฌุงุญ ูุฅุฑุฌุงุน ูุฎุฑุฌุงุช ูุงุจูุฉ ููุชุญููู.
* ุฒูู ูุนุงูุฌุฉ ููู ููุงุณู โค 15 ุซุงููุฉ.
* ููุฑุณุฉ + ุจุญุซ ูู ุงูุฃุฑุดูู ูุนููุงู.
* Dashboard: ุฑูุน ูููุ ุฅุฑุณุงู Jobุ ุชูุฒูู ูุชูุฌุฉ.
* ุณูุงุณุฉ ุฎุตูุตูุฉ ุจุณูุทุฉ + ุดุฑูุท ุงุณุชุฎุฏุงู.

---

## 13) ูุฎุงุทุฑ ูุน ุฎุทุท ุชุฎููู

* **ุฏูุฉ ูุงููููุฉ/ูุญุงุณุจูุฉ**: ูููุฐุฌ โHybrid Reviewโ ูุจุฏุงูุฉ.
* **ุฃุฏุงุก/OCR**: ูุนุงูุฌุฉ ุบูุฑ ูุชุฒุงููุฉ + ุทุงุจูุฑ ููุงู (Queue) ูุงุญููุง.
* **ุงูุชูุงููุงุช**: ูุจุฏุฃ ุจุฏูู ุชูุงูู ูุจุงุดุฑ (Upload) ุซู ูุถูู APIs.

---

## 14) ุงูุชุจุฑูุฑ ุงูุงุณุชุฑุงุชูุฌู

* ูุง ููุงูุณุฉ ูุจุงุดุฑุฉ ูุน ChatGPT.
* ูุจูุน **ูุชุงุฆุฌ** ูุง โูุญุงุฏุซุงุชโ.
* ุงูุชูุงู ุฐุงูุฑุฉ ูุคุณุณูุฉ = ููุฒุฉ ูุง ูููู ุชูููุฏูุง ุจุณุฑุนุฉ.

---

### ููุงุญู

**A) ุชุนุฑูู ุจูุช (ูุซุงู JSON)**

```json
{
  "id": "legal.contract_analyzer",
  "name": "Contract Analyzer",
  "inputs": ["pdf"],
  "outputs": ["pdf", "json"],
  "pricing": {"per_page_eur": 1.0},
  "sla": {"expected_latency_sec": 15}
}
```

**B) ูููุฐุฌ Job**

```json
{
  "job_id": "uuid",
  "bot_id": "legal.contract_analyzer",
  "workspace": "tenant-123",
  "status": "queued|running|done|error",
  "input_files": [".../contract_001.pdf"],
  "result_paths": [".../outputs/tenant-123/job_id/result.pdf", ".../result.json"],
  "latency_ms": 8123
}
```

---

### ูุงุฐุง ุชูุนู ุงูุขูุ

1. ุงูุณุฎ ูุฐุง ุงูููู ูู `Surooh_OS_Architecture_v1.md` ุฏุงุฎู ุงููุดุฑูุน.
2. ุฃุนุทู ุงููุจุฑูุฌูู:

   * Backend: ุชูููุฐ **Marketplace + Jobs + Outputs**.
   * AI/Academy: ุฑุจุท ุจูุชูู (ูุงูููู/ูุญุงุณุจู) ุจูุฎุฑุฌุงุช ุตุญูุญุฉ.
   * Frontend: ุตูุญุงุช (Login/Marketplace/Jobs/Result).

ุฅุฐุง ุชุฑูุฏุ ุฃุฌูุฒ ูู **ูุงุฆูุฉ ููุงู ุชูุตูููุฉ (Issues) ุจุตูุบุฉ Markdown** ุชููุตู ูุจุงุดุฑุฉ ูู Git/Replit ูุชูุณูู ุงูุนูู ุนูู ุงููุฑูู.

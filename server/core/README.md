# ๐ง Surooh Core - Smart Delegation + Core Dispatcher

ููุงุฉ ุงูุชูููุฐ ุงูุฐููุฉ ูุฅูุจุฑุงุทูุฑูุฉ ุณูุฑูุญ - ูุธุงู ุชูุฒูุน ุงูููุงู ูุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช

## ๐ ุงููููู

```
server/core/
โโโ delegation.py          # ูุธุงู ุงูุชูููุถ ุงูุฐูู
โโโ dispatcher.py          # ููุงุฉ ุงูุชูุฒูุน
โโโ cli.py                 # ูุงุฌูุฉ ุณุทุฑ ุงูุฃูุงูุฑ
โโโ main.py                # ุชุทุจูู FastAPI (standalone)
โโโ __init__.py            # Python package
โโโ policies/
    โโโ delegation.yaml    # ุณูุงุณุงุช ุงูุชูููุถ
```

## ๐ฏ ุงูููููุงุช

### 1. Smart Delegation (delegation.py)
ูุธุงู ุงูุชูููุถ ุงูุฐูู - ูุชุญูู ูู ุตูุงุญูุงุช ุงูุจูุชุงุช

**ุงููุธุงุฆู:**
- ุชุญููู ุงูุณูุงุณุงุช ูู YAML
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ (Roles)
- ุชุญุฏูุฏ ุงูููุงู ุงููุญุธูุฑุฉ

**ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ:**
- `customer_support` - ุฏุนู ุงูุนููุงุก
- `pricing_analyst` - ูุญูู ุงูุชุณุนูุฑ
- `analytics_engine` - ูุญุฑู ุงูุชุญูููุงุช
- `order_processor` - ูุนุงูุฌ ุงูุทูุจุงุช

### 2. Core Dispatcher (dispatcher.py)
ููุงุฉ ุงูุชูุฒูุน - ุงุฎุชูุงุฑ ุงูุจูุช ุงูููุงุณุจ ูุชูููุฐ ุงูููุงู

**ุงููุธุงุฆู:**
- ุชูุฒูุน ุงูููุงู ุนูู ุงูุจูุชุงุช
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุจู ุงูุชูููุฐ
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุจูุชุงุช
- ุชูููุฐ ุงูููุงู (ูุญุงูุงุฉ ุญุงููุงู)

**ุงูููุงู ุงููุชุงุญุฉ (16 ูููุฉ):**

**ุฏุนู ุงูุนููุงุก:**
- `handle_inquiry` - ูุนุงูุฌุฉ ุงุณุชูุณุงุฑ
- `create_ticket` - ุฅูุดุงุก ุชุฐูุฑุฉ
- `check_order_status` - ูุญุต ุญุงูุฉ ุงูุทูุจ
- `process_refund` - ูุนุงูุฌุฉ ุงุณุชุฑุฏุงุฏ

**ุงูุชุณุนูุฑ:**
- `analyze_pricing` - ุชุญููู ุงูุฃุณุนุงุฑ
- `generate_quote` - ุชูููุฏ ุนุฑุถ ุณุนุฑ
- `compare_competitors` - ููุงุฑูุฉ ุงูููุงูุณูู
- `update_price_list` - ุชุญุฏูุซ ูุงุฆูุฉ ุงูุฃุณุนุงุฑ

**ุงูุชุญูููุงุช:**
- `generate_report` - ุชูููุฏ ุชูุฑูุฑ
- `analyze_trends` - ุชุญููู ุงูุงุชุฌุงูุงุช
- `predict_demand` - ุงูุชูุจุค ุจุงูุทูุจ
- `calculate_metrics` - ุญุณุงุจ ุงูููุงููุณ

**ูุนุงูุฌุฉ ุงูุทูุจุงุช:**
- `process_order` - ูุนุงูุฌุฉ ุทูุจ
- `update_inventory` - ุชุญุฏูุซ ุงููุฎุฒูู
- `generate_invoice` - ุชูููุฏ ูุงุชูุฑุฉ
- `track_shipment` - ุชุชุจุน ุงูุดุญูุฉ

### 3. CLI Interface (cli.py)
ูุงุฌูุฉ ุณุทุฑ ุงูุฃูุงูุฑ ููุชูุงุนู ูุน ุงููุธุงู

**ุงูุงุณุชุฎุฏุงู:**
```bash
# ูุญุต ุตุญุฉ ุงููุธุงู
python3 cli.py health

# ุชูููุฐ ูููุฉ
python3 cli.py dispatch --task handle_inquiry --payload '{"customer_id":"123"}'
```

### 4. REST API Integration
ุงููุธุงู ูุชูุงูู ูุน Express ุนุจุฑ `/api/core/dispatch`

## ๐ API Endpoints

### POST /api/core/dispatch
ุชูุฒูุน ูููุฉ ุนูู ุงูุจูุช ุงูููุงุณุจ

**Request:**
```json
{
  "task": "handle_inquiry",
  "payload": {
    "customer_id": "123",
    "message": "ุฃุญุชุงุฌ ูุณุงุนุฏุฉ"
  }
}
```

**Response:**
```json
{
  "success": true,
  "task": "handle_inquiry",
  "bot": "ุจูุช ุฏุนู ุงูุนููุงุก",
  "bot_endpoint": "/api/bots/customer-support",
  "result": {
    "response": "ุชู ุงุณุชูุงู ุงุณุชูุณุงุฑู ูุณูุชู ุงูุฑุฏ ุนููู ูุฑูุจุงู",
    "ticket_id": "TKT-2025-001"
  },
  "timestamp": "2025-10-16T22:20:00Z"
}
```

### GET /api/core/health
ูุญุต ุตุญุฉ ุงููุธุงู

**Response:**
```json
{
  "status": "healthy",
  "dispatcher": "operational",
  "delegation": "loaded",
  "total_bots": 4,
  "active_bots": 4,
  "available_tasks": 16,
  "roles": ["customer_support", "pricing_analyst", "analytics_engine", "order_processor"]
}
```

## ๐ ุณูุงุณุงุช ุงูุชูููุถ (delegation.yaml)

ูููู ุชุนุฏูู ุงูุณูุงุณุงุช ูู `policies/delegation.yaml`:

```yaml
roles:
  customer_support:
    name: "ุฏุนู ุงูุนููุงุก"
    allowed_tasks:
      - "handle_inquiry"
      - "create_ticket"
    permissions:
      - "read_customer_data"
      - "update_ticket"

restricted_tasks:
  - "delete_customer"
  - "cancel_all_orders"
```

## ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

- [ ] ุฑุจุท ุจุงูุจูุชุงุช ุงูุญููููุฉ (ุญุงููุงู ูุญุงูุงุฉ)
- [ ] ุฅุถุงูุฉ ุฃุฏูุงุฑ ุฌุฏูุฏุฉ
- [ ] ุชูุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ูุธุงู ุงูููุงููุงุช ููููุงู ุงููุญุธูุฑุฉ
- [ ] ุชุชุจุน ุงูุฃุฏุงุก ูุงูุชุญูููุงุช

## ๐ ุงูุฃูุงู

- ุฌููุน ุงูููุงู ุชุฎุถุน ููุชุญูู ูู ุงูุตูุงุญูุงุช
- ุงูููุงู ุงููุญุธูุฑุฉ ุชุชุทูุจ ููุงููุฉ ูุฏููุฉ
- ุชุณุฌูู ุดุงูู ูุฌููุน ุนูููุงุช ุงูุชูููุถ
